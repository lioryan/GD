<!DOCTYPE html>
<html>
<head>
    <title>Neural Network Unit with Gradient Descent</title>
    <style>
        body { 
            margin: 0; 
            padding: 0; 
            font-family: Arial, sans-serif;
            background: white;
            overflow: hidden;
        }
        .container {
            display: flex;
            width: 100vw;
            height: 100vh;
        }
        #bowl-container {
            flex: 1;
            position: relative;
        }
        #network-container {
            flex: 1;
            position: relative;
            background: #f8f9fa;
            border-left: 1px solid #ddd;
        }
        .controls {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            z-index: 1000;
        }
        .equation {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            font-size: 1.2em;
            z-index: 1000;
        }
        canvas {
            width: 100%;
            height: 100%;
        }
        #instructions {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
            color: #666;
        }
        .slider-group {
            margin-bottom: 10px;
        }
        input[type="range"] {
            width: 200px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="bowl-container">
            <canvas id="bowl-canvas"></canvas>
        </div>
        <div id="network-container">
            <canvas id="network-canvas"></canvas>
        </div>
    </div>

    <div class="controls">
        <div class="slider-group">
            <label>Weight 1 (θ₁): <span id="x-value">0</span></label><br>
            <input type="range" id="x" min="-5" max="5" value="0" step="0.1">
        </div>
        <div class="slider-group">
            <label>Weight 2 (θ₂): <span id="y-value">0</span></label><br>
            <input type="range" id="y" min="-5" max="5" value="0" step="0.1">
        </div>
        <div id="value">Loss Value: 0</div>
    </div>

    <div class="equation">
        L(θ₁, θ₂) = θ₁² + θ₂²
    </div>

    <div id="instructions">
        • Left-click + drag point to adjust weights<br>
        • Middle-click/Alt + drag to move graph<br>
        • Right-click + drag to rotate view<br>
        • Mouse wheel to zoom
    </div>

    <script>
        // [Previous bowl visualization code remains the same...]

        // Neural Network Visualization
        const networkCanvas = document.getElementById('network-canvas');
        const networkCtx = networkCanvas.getContext('2d');

        function drawNeuron(ctx, x, y, radius) {
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2);
            ctx.fillStyle = '#fff';
            ctx.fill();
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 2;
            ctx.stroke();
        }

        function drawWeight(ctx, startX, startY, endX, endY, weight) {
            const lineWidth = Math.abs(weight) * 3;
            const color = weight >= 0 ? 'rgb(0,150,255)' : 'rgb(255,100,100)';
            
            ctx.beginPath();
            ctx.moveTo(startX, startY);
            ctx.lineTo(endX, endY);
            ctx.strokeStyle = color;
            ctx.lineWidth = lineWidth;
            ctx.stroke();

            // Draw weight value
            const midX = (startX + endX) / 2;
            const midY = (startY + endY) / 2;
            ctx.fillStyle = '#000';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(weight.toFixed(2), midX, midY - 10);
        }

        function drawNetwork() {
            const width = networkCanvas.width;
            const height = networkCanvas.height;
            networkCtx.clearRect(0, 0, width, height);

            const neuronRadius = 25;
            const inputY = height * 0.3;
            const outputY = height * 0.7;
            
            // Draw input neurons
            drawNeuron(networkCtx, width * 0.2, inputY - 50, neuronRadius);
            drawNeuron(networkCtx, width * 0.2, inputY + 50, neuronRadius);
            
            // Draw output neuron
            drawNeuron(networkCtx, width * 0.8, outputY, neuronRadius);

            // Draw weights
            drawWeight(networkCtx, 
                width * 0.2 + neuronRadius, inputY - 50,
                width * 0.8 - neuronRadius, outputY,
                currentPos.x);
            
            drawWeight(networkCtx,
                width * 0.2 + neuronRadius, inputY + 50,
                width * 0.8 - neuronRadius, outputY,
                currentPos.y);

            // Labels
            networkCtx.fillStyle = '#000';
            networkCtx.font = '16px Arial';
            networkCtx.textAlign = 'right';
            networkCtx.fillText('x₁', width * 0.15, inputY - 45);
            networkCtx.fillText('x₂', width * 0.15, inputY + 55);
            
            networkCtx.textAlign = 'left';
            networkCtx.fillText('y', width * 0.85, outputY + 5);

            // Draw title
            networkCtx.font = 'bold 20px Arial';
            networkCtx.textAlign = 'center';
            networkCtx.fillText('Neural Network Unit', width / 2, 40);
        }

        // Update network when weights change
        const originalUpdatePosition = updatePosition;
        updatePosition = function() {
            originalUpdatePosition();
            drawNetwork();
        }

        // Initialize network canvas
        function resizeNetworkCanvas() {
            networkCanvas.width = networkCanvas.parentElement.clientWidth;
            networkCanvas.height = networkCanvas.parentElement.clientHeight;
            drawNetwork();
        }

        window.addEventListener('resize', resizeNetworkCanvas);
        resizeNetworkCanvas();
        updatePosition();
    </script>
</body>
</html>
